<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>Flutter带下拉建议列表的搜索框 | 骚客.的个人博客</title>
  <meta name="description" content="基于DropdownMenu实现Flutter自带的DropdownMenu无法满足需求，在源码的基础上copy一份出来修改： suggest_search_bar.dart： import &#39;dart:async&#39;;  import &#39;package:flutter&#x2F;material.dart&#39;;  class SuggestSearchBar extends StatefulWidget &amp;#">
<meta property="og:type" content="article">
<meta property="og:title" content="Flutter带下拉建议列表的搜索框">
<meta property="og:url" content="http://princesaoke.github.io/2024/04/01/Flutter%E5%B8%A6%E4%B8%8B%E6%8B%89%E5%BB%BA%E8%AE%AE%E5%88%97%E8%A1%A8%E7%9A%84%E6%90%9C%E7%B4%A2%E6%A1%86/">
<meta property="og:site_name" content="骚客.的个人博客">
<meta property="og:description" content="基于DropdownMenu实现Flutter自带的DropdownMenu无法满足需求，在源码的基础上copy一份出来修改： suggest_search_bar.dart： import &#39;dart:async&#39;;  import &#39;package:flutter&#x2F;material.dart&#39;;  class SuggestSearchBar extends StatefulWidget &amp;#">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-04-01T15:45:17.000Z">
<meta property="article:modified_time" content="2025-12-21T07:11:24.820Z">
<meta property="article:author" content="骚客.">
<meta property="article:tag" content="Flutter">
<meta name="twitter:card" content="summary">
  <!-- Canonical links -->
  <link rel="canonical" href="http://princesaoke.github.io/2024/04/01/Flutter%E5%B8%A6%E4%B8%8B%E6%8B%89%E5%BB%BA%E8%AE%AE%E5%88%97%E8%A1%A8%E7%9A%84%E6%90%9C%E7%B4%A2%E6%A1%86/index.html">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
<link rel="alternate" href="/atom.xml" title="骚客.的个人博客" type="application/atom+xml">
</head>


<body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="https://github.com/PrinceSaoKe" target="_blank">
          <img class="img-circle img-rotate" src="/images/avatar.jpg" width="200" height="200">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">骚客.</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md">Frontend Developer</h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> 福建省</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav ">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">首页</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">归档</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">分类</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-tags">
          <a href="/tags">
            
            <i class="icon icon-tags"></i>
            
            <span class="menu-title">标签</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-repository">
          <a href="/repository">
            
            <i class="icon icon-project"></i>
            
            <span class="menu-title">项目</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-links">
          <a href="/links">
            
            <i class="icon icon-friendship"></i>
            
            <span class="menu-title">友链</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            
            <i class="icon icon-cup-fill"></i>
            
            <span class="menu-title">关于</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/PrinceSaoKe" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="https://PrinceSaoKe.github.io/images/qq.jpg" target="_blank" title="Qq" data-toggle=tooltip data-placement=top><i class="icon icon-qq"></i></a></li>
        
        <li><a href="https://PrinceSaoKe.github.io/images/weixin.png" target="_blank" title="Wechat" data-toggle=tooltip data-placement=top><i class="icon icon-wechat"></i></a></li>
        
        <li><a href="mailto:2596818595@qq.com" target="_blank" title="Email" data-toggle=tooltip data-placement=top><i class="icon icon-email"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <a target="_blank" rel="noopener" href="http://saoke.fun/" title="骚客.的个人网站" style="color:blue">点我访问我的个人网站~</a>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">分类</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%85%B6%E4%BB%96/">其他</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%90%8E%E7%AB%AF/">后端</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%A7%BB%E5%8A%A8%E7%AB%AF/">移动端</a><span class="category-list-count">21</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AE%97%E6%B3%95/">算法</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%A1%E7%BD%91/">计网</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9D%A2%E7%BB%8F/">面经</a><span class="category-list-count">10</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">标签</h3>
    <div class="widget-body">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/" rel="tag">Android</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/" rel="tag">CSS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/" rel="tag">Docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Flutter/" rel="tag">Flutter</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Github/" rel="tag">Github</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTML/" rel="tag">HTML</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hexo/" rel="tag">Hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/" rel="tag">JavaScript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kotlin/" rel="tag">Kotlin</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SpringBoot/" rel="tag">SpringBoot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue3/" rel="tag">Vue3</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/" rel="tag">服务器</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">标签云</h3>
    <div class="widget-body tagcloud">
      <a href="/tags/Android/" style="font-size: 14px;">Android</a> <a href="/tags/CSS/" style="font-size: 13px;">CSS</a> <a href="/tags/Docker/" style="font-size: 13px;">Docker</a> <a href="/tags/Flutter/" style="font-size: 13.67px;">Flutter</a> <a href="/tags/Git/" style="font-size: 13px;">Git</a> <a href="/tags/Github/" style="font-size: 13px;">Github</a> <a href="/tags/HTML/" style="font-size: 13px;">HTML</a> <a href="/tags/Hexo/" style="font-size: 13px;">Hexo</a> <a href="/tags/Java/" style="font-size: 13.33px;">Java</a> <a href="/tags/JavaScript/" style="font-size: 13px;">JavaScript</a> <a href="/tags/Kotlin/" style="font-size: 13px;">Kotlin</a> <a href="/tags/MySQL/" style="font-size: 13px;">MySQL</a> <a href="/tags/Redis/" style="font-size: 13px;">Redis</a> <a href="/tags/SpringBoot/" style="font-size: 13px;">SpringBoot</a> <a href="/tags/Vue3/" style="font-size: 13px;">Vue3</a> <a href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 13px;">服务器</a>
    </div>
  </div>

    
      
  <div class="widget">
    <h3 class="widget-title">归档</h3>
    <div class="widget-body">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/02/">二月 2025</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/01/">一月 2025</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/10/">十月 2024</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/09/">九月 2024</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/07/">七月 2024</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/06/">六月 2024</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/05/">五月 2024</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/04/">四月 2024</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">三月 2024</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/01/">一月 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/12/">十二月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/11/">十一月 2023</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/10/">十月 2023</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/09/">九月 2023</a><span class="archive-list-count">10</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled no-thumbnail">
        
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E5%90%8E%E7%AB%AF/">后端</a>
              </p>
              <p class="item-title">
                <a href="/2025/02/14/Docker%E7%AC%94%E8%AE%B0/" class="title">Docker笔记</a>
              </p>
              <p class="item-date">
                <time datetime="2025-02-14T08:48:08.000Z" itemprop="datePublished">2025-02-14</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E5%90%8E%E7%AB%AF/">后端</a>
              </p>
              <p class="item-title">
                <a href="/2025/02/10/SpringBoot%E7%AC%94%E8%AE%B0/" class="title">SpringBoot笔记</a>
              </p>
              <p class="item-date">
                <time datetime="2025-02-09T17:00:40.000Z" itemprop="datePublished">2025-02-10</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                
              </p>
              <p class="item-title">
                <a href="/2025/02/02/Cookie%E3%80%81Session%E5%92%8CJWT/" class="title">Cookie、Session和JWT</a>
              </p>
              <p class="item-date">
                <time datetime="2025-02-01T17:16:02.000Z" itemprop="datePublished">2025-02-02</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E5%90%8E%E7%AB%AF/">后端</a>
              </p>
              <p class="item-title">
                <a href="/2025/01/22/Redis%E7%AC%94%E8%AE%B0/" class="title">Redis笔记</a>
              </p>
              <p class="item-date">
                <time datetime="2025-01-22T15:46:18.000Z" itemprop="datePublished">2025-01-22</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/%E9%9D%A2%E7%BB%8F/">面经</a>
              </p>
              <p class="item-title">
                <a href="/2024/10/20/%E7%99%BE%E5%BA%A6%E7%A7%8B%E6%8B%9B%E9%9D%A2%E7%BB%8F/" class="title">百度秋招面经</a>
              </p>
              <p class="item-date">
                <time datetime="2024-10-20T15:43:16.000Z" itemprop="datePublished">2024-10-20</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<main class="main" role="main">
  <div class="content">
  <article id="post-Flutter带下拉建议列表的搜索框" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      Flutter带下拉建议列表的搜索框
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/2024/04/01/Flutter%E5%B8%A6%E4%B8%8B%E6%8B%89%E5%BB%BA%E8%AE%AE%E5%88%97%E8%A1%A8%E7%9A%84%E6%90%9C%E7%B4%A2%E6%A1%86/" class="article-date">
	  <time datetime="2024-04-01T15:45:17.000Z" itemprop="datePublished">2024-04-01</time>
	</a>
</span>
        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/%E7%A7%BB%E5%8A%A8%E7%AB%AF/">移动端</a>
  </span>

        
  <span class="article-tag">
    <i class="icon icon-tags"></i>
	<a class="article-tag-link-link" href="/tags/Flutter/" rel="tag">Flutter</a>
  </span>


        
	<span class="article-read hidden-xs">
	    <i class="icon icon-eye-fill" aria-hidden="true"></i>
	    <span id="busuanzi_container_page_pv">
			<span id="busuanzi_value_page_pv">0</span>
		</span>
	</span>


        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/2024/04/01/Flutter%E5%B8%A6%E4%B8%8B%E6%8B%89%E5%BB%BA%E8%AE%AE%E5%88%97%E8%A1%A8%E7%9A%84%E6%90%9C%E7%B4%A2%E6%A1%86/#comments" class="article-comment-link">评论</a></span>
        
	
		<span class="post-wordcount hidden-xs" itemprop="wordCount">字数统计: 3.4k(字)</span>
	
	
		<span class="post-readcount hidden-xs" itemprop="timeRequired">阅读时长: 21(分)</span>
	

      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <h1 id="基于DropdownMenu实现"><a href="#基于DropdownMenu实现" class="headerlink" title="基于DropdownMenu实现"></a>基于<code>DropdownMenu</code>实现</h1><p>Flutter自带的<code>DropdownMenu</code>无法满足需求，在源码的基础上copy一份出来修改：</p>
<p>suggest_search_bar.dart：</p>
<pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'dart:async'</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter/material.dart'</span></span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">SuggestSearchBar</span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">/// 带建议的搜索框</span>
  <span class="token keyword">const</span> <span class="token class-name">SuggestSearchBar</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span>key<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>width<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>maxSuggestHeight <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>hintText<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>onSelected<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>buildSuggestion<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>inputController<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>defaultSuggestion<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>trailingIcon<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>isCollapsed <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>contentPadding<span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">/// 搜索框的宽度，只有当`trailingIcon`不为null时生效</span>
  <span class="token keyword">final</span> double<span class="token operator">?</span> width<span class="token punctuation">;</span>

  <span class="token comment">/// 建议栏的最大高度</span>
  <span class="token keyword">final</span> double maxSuggestHeight<span class="token punctuation">;</span>

  <span class="token keyword">final</span> <span class="token class-name">String</span><span class="token operator">?</span> hintText<span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token operator">?</span><span class="token punctuation">)</span><span class="token operator">?</span> onSelected<span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">TextEditingController</span><span class="token operator">?</span> inputController<span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span><span class="token operator">?</span> defaultSuggestion<span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">Widget</span><span class="token operator">?</span> trailingIcon<span class="token punctuation">;</span>

  <span class="token comment">/// 构建搜索建议</span>
  <span class="token comment">///</span>
  <span class="token comment">/// 传入一个带`String`参数的方法，该参数为当前搜索框输入的值</span>
  <span class="token comment">/// 返回一个`Future&lt;List&lt;String>>`，为建议值列表</span>
  <span class="token keyword">final</span> <span class="token class-name">Future</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token operator">?</span> buildSuggestion<span class="token punctuation">;</span>

  <span class="token comment">/// 即搜索框[TextField]的[isCollapsed]</span>
  <span class="token keyword">final</span> bool isCollapsed<span class="token punctuation">;</span>

  <span class="token comment">/// 即搜索框[TextField]的[contentPadding]</span>
  <span class="token keyword">final</span> <span class="token class-name">EdgeInsetsGeometry</span><span class="token operator">?</span> contentPadding<span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SuggestSearchBar</span><span class="token punctuation">></span></span> <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">_SuggestSearchBarState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">class</span> _SuggestSearchBarState <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SuggestSearchBar</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">final</span> <span class="token class-name">StreamController</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span><span class="token punctuation">></span></span> streamController <span class="token operator">=</span> <span class="token class-name">StreamController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  late <span class="token class-name">TextEditingController</span> _inputController<span class="token punctuation">;</span>
  <span class="token metadata function">@override</span>
  <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    _inputController <span class="token operator">=</span> widget<span class="token punctuation">.</span>inputController <span class="token operator">?</span><span class="token operator">?</span> <span class="token class-name">TextEditingController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>widget<span class="token punctuation">.</span>inputController <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> widget<span class="token punctuation">.</span>buildSuggestion <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    widget<span class="token punctuation">.</span>inputController<span class="token operator">!</span><span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span>onChanged<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token function">onChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">async</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> suggestionList <span class="token operator">=</span>
        <span class="token keyword">await</span> widget<span class="token punctuation">.</span>buildSuggestion<span class="token operator">!</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>widget<span class="token punctuation">.</span>inputController<span class="token operator">!</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
    streamController<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>suggestionList<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token class-name">StreamBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span><span class="token punctuation">></span></span><span class="token punctuation">(</span>
      stream<span class="token punctuation">:</span> streamController<span class="token punctuation">.</span>stream<span class="token punctuation">,</span>
      initialData<span class="token punctuation">:</span> widget<span class="token punctuation">.</span>defaultSuggestion<span class="token punctuation">,</span>
      builder<span class="token punctuation">:</span> <span class="token punctuation">(</span>context<span class="token punctuation">,</span> snapshot<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DropdownMenuEntry</span><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span><span class="token punctuation">></span></span> entryList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>snapshot<span class="token punctuation">.</span>data <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
          entryList <span class="token operator">=</span> snapshot<span class="token punctuation">.</span>data<span class="token operator">!</span>
              <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token class-name">DropdownMenuEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>label<span class="token punctuation">:</span> e<span class="token punctuation">,</span> value<span class="token punctuation">:</span> e<span class="token punctuation">)</span><span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">return</span> <span class="token class-name">CustomedDropdownMenu</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>
          width<span class="token punctuation">:</span> widget<span class="token punctuation">.</span>width<span class="token punctuation">,</span>
          menuHeight<span class="token punctuation">:</span> widget<span class="token punctuation">.</span>maxSuggestHeight<span class="token punctuation">,</span>
          hintText<span class="token punctuation">:</span> widget<span class="token punctuation">.</span>hintText<span class="token punctuation">,</span>
          trailingIcon<span class="token punctuation">:</span> widget<span class="token punctuation">.</span>trailingIcon <span class="token operator">?</span><span class="token operator">?</span>
              <span class="token class-name">InkWell</span><span class="token punctuation">(</span>
                  onTap<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    _inputController<span class="token punctuation">.</span>text <span class="token operator">=</span> <span class="token string-literal"><span class="token string">""</span></span><span class="token punctuation">;</span>
                    widget<span class="token punctuation">.</span>onSelected<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">""</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                  child<span class="token punctuation">:</span> <span class="token class-name">Icon</span><span class="token punctuation">(</span><span class="token class-name">Icons</span><span class="token punctuation">.</span>search<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          onSelected<span class="token punctuation">:</span> widget<span class="token punctuation">.</span>onSelected<span class="token punctuation">,</span>
          controller<span class="token punctuation">:</span> _inputController<span class="token punctuation">,</span>
          dropdownMenuEntries<span class="token punctuation">:</span> entryList<span class="token punctuation">,</span>
          enableFilter<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          requestFocusOnTap<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          isCollapsed<span class="token punctuation">:</span> widget<span class="token punctuation">.</span>isCollapsed<span class="token punctuation">,</span>
          contentPadding<span class="token punctuation">:</span> widget<span class="token punctuation">.</span>contentPadding<span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>对源码的修改：</p>
<p>customed_dropdown_menu.dart：</p>
<pre class="line-numbers language-dart" data-language="dart"><code class="language-dart"><span class="token comment">// Copyright 2014 The Flutter Authors. All rights reserved.</span>
<span class="token comment">// Use of this source code is governed by a BSD-style license that can be</span>
<span class="token comment">// found in the LICENSE file.</span>

<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'dart:math'</span></span> <span class="token operator">as</span> math<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter/material.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter/rendering.dart'</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string-literal"><span class="token string">'package:flutter/services.dart'</span></span><span class="token punctuation">;</span>

<span class="token comment">// Navigation shortcuts to move the selected menu items up or down.</span>
<span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ShortcutActivator</span><span class="token punctuation">,</span> <span class="token class-name">Intent</span><span class="token punctuation">></span></span> _kMenuTraversalShortcuts <span class="token operator">=</span>
    <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ShortcutActivator</span><span class="token punctuation">,</span> <span class="token class-name">Intent</span><span class="token punctuation">></span></span><span class="token punctuation">&#123;</span>
  <span class="token class-name">LogicalKeySet</span><span class="token punctuation">(</span><span class="token class-name">LogicalKeyboardKey</span><span class="token punctuation">.</span>arrowUp<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">const</span> <span class="token function">_ArrowUpIntent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token class-name">LogicalKeySet</span><span class="token punctuation">(</span><span class="token class-name">LogicalKeyboardKey</span><span class="token punctuation">.</span>arrowDown<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">const</span> <span class="token function">_ArrowDownIntent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> double _kMinimumWidth <span class="token operator">=</span> <span class="token number">112.0</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> double _kDefaultHorizontalPadding <span class="token operator">=</span> <span class="token number">12.0</span><span class="token punctuation">;</span>

<span class="token comment">/// A dropdown menu that can be opened from a [TextField]. The selected</span>
<span class="token comment">/// menu item is displayed in that field.</span>
<span class="token comment">///</span>
<span class="token comment">/// This widget is used to help people make a choice from a menu and put the</span>
<span class="token comment">/// selected item into the text input field. People can also filter the list based</span>
<span class="token comment">/// on the text input or search one item in the menu list.</span>
<span class="token comment">///</span>
<span class="token comment">/// The menu is composed of a list of [DropdownMenuEntry]s. People can provide information,</span>
<span class="token comment">/// such as: label, leading icon or trailing icon for each entry. The [TextField]</span>
<span class="token comment">/// will be updated based on the selection from the menu entries. The text field</span>
<span class="token comment">/// will stay empty if the selected entry is disabled.</span>
<span class="token comment">///</span>
<span class="token comment">/// The dropdown menu can be traversed by pressing the up or down key. During the</span>
<span class="token comment">/// process, the corresponding item will be highlighted and the text field will be updated.</span>
<span class="token comment">/// Disabled items will be skipped during traversal.</span>
<span class="token comment">///</span>
<span class="token comment">/// The menu can be scrollable if not all items in the list are displayed at once.</span>
<span class="token comment">///</span>
<span class="token comment">/// &#123;@tool dartpad&#125;</span>
<span class="token comment">/// This sample shows how to display outlined [DropdownMenu] and filled [DropdownMenu].</span>
<span class="token comment">///</span>
<span class="token comment">/// ** See code in examples/api/lib/material/dropdown_menu/dropdown_menu.0.dart **</span>
<span class="token comment">/// &#123;@end-tool&#125;</span>
<span class="token comment">///</span>
<span class="token comment">/// See also:</span>
<span class="token comment">///</span>
<span class="token comment">/// * [MenuAnchor], which is a widget used to mark the "anchor" for a set of submenus.</span>
<span class="token comment">///   The [DropdownMenu] uses a [TextField] as the "anchor".</span>
<span class="token comment">/// * [TextField], which is a text input widget that uses an [InputDecoration].</span>
<span class="token comment">/// * [DropdownMenuEntry], which is used to build the [MenuItemButton] in the [DropdownMenu] list.</span>
<span class="token keyword">class</span> <span class="token class-name">CustomedDropdownMenu</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token keyword">extends</span> <span class="token class-name">StatefulWidget</span> <span class="token punctuation">&#123;</span>
  <span class="token comment">/// Creates a const [DropdownMenu].</span>
  <span class="token comment">///</span>
  <span class="token comment">/// The leading and trailing icons in the text field can be customized by using</span>
  <span class="token comment">/// [leadingIcon], [trailingIcon] and [selectedTrailingIcon] properties. They are</span>
  <span class="token comment">/// passed down to the [InputDecoration] properties, and will override values</span>
  <span class="token comment">/// in the [InputDecoration.prefixIcon] and [InputDecoration.suffixIcon].</span>
  <span class="token comment">///</span>
  <span class="token comment">/// Except leading and trailing icons, the text field can be configured by the</span>
  <span class="token comment">/// [InputDecorationTheme] property. The menu can be configured by the [menuStyle].</span>
  <span class="token keyword">const</span> <span class="token class-name">CustomedDropdownMenu</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span>key<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>enabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>width<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>menuHeight<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>leadingIcon<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>trailingIcon<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>label<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>hintText<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>helperText<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>errorText<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>selectedTrailingIcon<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>enableFilter <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>enableSearch <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>textStyle<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>inputDecorationTheme<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>menuStyle<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>controller<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>initialSelection<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>onSelected<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>requestFocusOnTap<span class="token punctuation">,</span>
    required <span class="token keyword">this</span><span class="token punctuation">.</span>dropdownMenuEntries<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>isCollapsed <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>contentPadding<span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">/// Determine if the [DropdownMenu] is enabled.</span>
  <span class="token comment">///</span>
  <span class="token comment">/// Defaults to true.</span>
  <span class="token keyword">final</span> bool enabled<span class="token punctuation">;</span>

  <span class="token comment">/// Determine the width of the [DropdownMenu].</span>
  <span class="token comment">///</span>
  <span class="token comment">/// If this is null, the width of the [DropdownMenu] will be the same as the width of the widest</span>
  <span class="token comment">/// menu item plus the width of the leading/trailing icon.</span>
  <span class="token keyword">final</span> double<span class="token operator">?</span> width<span class="token punctuation">;</span>

  <span class="token comment">/// Determine the height of the menu.</span>
  <span class="token comment">///</span>
  <span class="token comment">/// If this is null, the menu will display as many items as possible on the screen.</span>
  <span class="token keyword">final</span> double<span class="token operator">?</span> menuHeight<span class="token punctuation">;</span>

  <span class="token comment">/// An optional Icon at the front of the text input field.</span>
  <span class="token comment">///</span>
  <span class="token comment">/// Defaults to null. If this is not null, the menu items will have extra paddings to be aligned</span>
  <span class="token comment">/// with the text in the text field.</span>
  <span class="token keyword">final</span> <span class="token class-name">Widget</span><span class="token operator">?</span> leadingIcon<span class="token punctuation">;</span>

  <span class="token comment">/// An optional icon at the end of the text field.</span>
  <span class="token comment">///</span>
  <span class="token comment">/// Defaults to an [Icon] with [Icons.arrow_drop_down].</span>
  <span class="token keyword">final</span> <span class="token class-name">Widget</span><span class="token operator">?</span> trailingIcon<span class="token punctuation">;</span>

  <span class="token comment">/// Optional widget that describes the input field.</span>
  <span class="token comment">///</span>
  <span class="token comment">/// When the input field is empty and unfocused, the label is displayed on</span>
  <span class="token comment">/// top of the input field (i.e., at the same location on the screen where</span>
  <span class="token comment">/// text may be entered in the input field). When the input field receives</span>
  <span class="token comment">/// focus (or if the field is non-empty), the label moves above, either</span>
  <span class="token comment">/// vertically adjacent to, or to the center of the input field.</span>
  <span class="token comment">///</span>
  <span class="token comment">/// Defaults to null.</span>
  <span class="token keyword">final</span> <span class="token class-name">Widget</span><span class="token operator">?</span> label<span class="token punctuation">;</span>

  <span class="token comment">/// Text that suggests what sort of input the field accepts.</span>
  <span class="token comment">///</span>
  <span class="token comment">/// Defaults to null;</span>
  <span class="token keyword">final</span> <span class="token class-name">String</span><span class="token operator">?</span> hintText<span class="token punctuation">;</span>

  <span class="token comment">/// Text that provides context about the [DropdownMenu]'s value, such</span>
  <span class="token comment">/// as how the value will be used.</span>
  <span class="token comment">///</span>
  <span class="token comment">/// If non-null, the text is displayed below the input field, in</span>
  <span class="token comment">/// the same location as [errorText]. If a non-null [errorText] value is</span>
  <span class="token comment">/// specified then the helper text is not shown.</span>
  <span class="token comment">///</span>
  <span class="token comment">/// Defaults to null;</span>
  <span class="token comment">///</span>
  <span class="token comment">/// See also:</span>
  <span class="token comment">///</span>
  <span class="token comment">/// * [InputDecoration.helperText], which is the text that provides context about the [InputDecorator.child]'s value.</span>
  <span class="token keyword">final</span> <span class="token class-name">String</span><span class="token operator">?</span> helperText<span class="token punctuation">;</span>

  <span class="token comment">/// Text that appears below the input field and the border to show the error message.</span>
  <span class="token comment">///</span>
  <span class="token comment">/// If non-null, the border's color animates to red and the [helperText] is not shown.</span>
  <span class="token comment">///</span>
  <span class="token comment">/// Defaults to null;</span>
  <span class="token comment">///</span>
  <span class="token comment">/// See also:</span>
  <span class="token comment">///</span>
  <span class="token comment">/// * [InputDecoration.errorText], which is the text that appears below the [InputDecorator.child] and the border.</span>
  <span class="token keyword">final</span> <span class="token class-name">String</span><span class="token operator">?</span> errorText<span class="token punctuation">;</span>

  <span class="token comment">/// An optional icon at the end of the text field to indicate that the text</span>
  <span class="token comment">/// field is pressed.</span>
  <span class="token comment">///</span>
  <span class="token comment">/// Defaults to an [Icon] with [Icons.arrow_drop_up].</span>
  <span class="token keyword">final</span> <span class="token class-name">Widget</span><span class="token operator">?</span> selectedTrailingIcon<span class="token punctuation">;</span>

  <span class="token comment">/// Determine if the menu list can be filtered by the text input.</span>
  <span class="token comment">///</span>
  <span class="token comment">/// Defaults to false.</span>
  <span class="token keyword">final</span> bool enableFilter<span class="token punctuation">;</span>

  <span class="token comment">/// Determine if the first item that matches the text input can be highlighted.</span>
  <span class="token comment">///</span>
  <span class="token comment">/// Defaults to true as the search function could be commonly used.</span>
  <span class="token keyword">final</span> bool enableSearch<span class="token punctuation">;</span>

  <span class="token comment">/// The text style for the [TextField] of the [DropdownMenu];</span>
  <span class="token comment">///</span>
  <span class="token comment">/// Defaults to the overall theme's [TextTheme.labelLarge]</span>
  <span class="token comment">/// if the dropdown menu theme's value is null.</span>
  <span class="token keyword">final</span> <span class="token class-name">TextStyle</span><span class="token operator">?</span> textStyle<span class="token punctuation">;</span>

  <span class="token comment">/// Defines the default appearance of [InputDecoration] to show around the text field.</span>
  <span class="token comment">///</span>
  <span class="token comment">/// By default, shows a outlined text field.</span>
  <span class="token keyword">final</span> <span class="token class-name">InputDecorationTheme</span><span class="token operator">?</span> inputDecorationTheme<span class="token punctuation">;</span>

  <span class="token comment">/// The [MenuStyle] that defines the visual attributes of the menu.</span>
  <span class="token comment">///</span>
  <span class="token comment">/// The default width of the menu is set to the width of the text field.</span>
  <span class="token keyword">final</span> <span class="token class-name">MenuStyle</span><span class="token operator">?</span> menuStyle<span class="token punctuation">;</span>

  <span class="token comment">/// Controls the text being edited or selected in the menu.</span>
  <span class="token comment">///</span>
  <span class="token comment">/// If null, this widget will create its own [TextEditingController].</span>
  <span class="token keyword">final</span> <span class="token class-name">TextEditingController</span><span class="token operator">?</span> controller<span class="token punctuation">;</span>

  <span class="token comment">/// The value used to for an initial selection.</span>
  <span class="token comment">///</span>
  <span class="token comment">/// Defaults to null.</span>
  <span class="token keyword">final</span> <span class="token class-name">T</span><span class="token operator">?</span> initialSelection<span class="token punctuation">;</span>

  <span class="token comment">/// The callback is called when a selection is made.</span>
  <span class="token comment">///</span>
  <span class="token comment">/// Defaults to null. If null, only the text field is updated.</span>
  <span class="token keyword">final</span> <span class="token class-name">ValueChanged</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token operator">?</span><span class="token punctuation">></span></span><span class="token operator">?</span> onSelected<span class="token punctuation">;</span>

  <span class="token comment">/// Determine if the dropdown button requests focus and the on-screen virtual</span>
  <span class="token comment">/// keyboard is shown in response to a touch event.</span>
  <span class="token comment">///</span>
  <span class="token comment">/// By default, on mobile platforms, tapping on the text field and opening</span>
  <span class="token comment">/// the menu will not cause a focus request and the virtual keyboard will not</span>
  <span class="token comment">/// appear. The default behavior for desktop platforms is for the dropdown to</span>
  <span class="token comment">/// take the focus.</span>
  <span class="token comment">///</span>
  <span class="token comment">/// Defaults to null. Setting this field to true or false, rather than allowing</span>
  <span class="token comment">/// the implementation to choose based on the platform, can be useful for</span>
  <span class="token comment">/// applications that want to override the default behavior.</span>
  <span class="token keyword">final</span> bool<span class="token operator">?</span> requestFocusOnTap<span class="token punctuation">;</span>

  <span class="token comment">/// Descriptions of the menu items in the [DropdownMenu].</span>
  <span class="token comment">///</span>
  <span class="token comment">/// This is a required parameter. It is recommended that at least one [DropdownMenuEntry]</span>
  <span class="token comment">/// is provided. If this is an empty list, the menu will be empty and only</span>
  <span class="token comment">/// contain space for padding.</span>
  <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DropdownMenuEntry</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span><span class="token punctuation">></span></span> dropdownMenuEntries<span class="token punctuation">;</span>

  <span class="token comment">/// 即搜索框[TextField]的[isCollapsed]</span>
  <span class="token keyword">final</span> bool isCollapsed<span class="token punctuation">;</span>

  <span class="token comment">/// 即搜索框[TextField]的[contentPadding]</span>
  <span class="token keyword">final</span> <span class="token class-name">EdgeInsetsGeometry</span><span class="token operator">?</span> contentPadding<span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CustomedDropdownMenu</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">createState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span>
      _CustomedDropdownMenuState<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">class</span> _CustomedDropdownMenuState<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token keyword">extends</span> <span class="token class-name">State</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CustomedDropdownMenu</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">final</span> <span class="token class-name">GlobalKey</span> _anchorKey <span class="token operator">=</span> <span class="token class-name">GlobalKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">GlobalKey</span> _leadingKey <span class="token operator">=</span> <span class="token class-name">GlobalKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">final</span> <span class="token class-name">MenuController</span> _controller <span class="token operator">=</span> <span class="token class-name">MenuController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  late <span class="token keyword">final</span> <span class="token class-name">TextEditingController</span> _textEditingController<span class="token punctuation">;</span>
  late bool _enableFilter<span class="token punctuation">;</span>
  late <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DropdownMenuEntry</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span><span class="token punctuation">></span></span> filteredEntries<span class="token punctuation">;</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">></span></span><span class="token operator">?</span> _initialMenu<span class="token punctuation">;</span>
  int<span class="token operator">?</span> currentHighlight<span class="token punctuation">;</span>
  double<span class="token operator">?</span> leadingPadding<span class="token punctuation">;</span>
  bool _menuHasEnabledItem <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    _textEditingController <span class="token operator">=</span> widget<span class="token punctuation">.</span>controller <span class="token operator">?</span><span class="token operator">?</span> <span class="token class-name">TextEditingController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    _enableFilter <span class="token operator">=</span> widget<span class="token punctuation">.</span>enableFilter<span class="token punctuation">;</span>
    filteredEntries <span class="token operator">=</span> widget<span class="token punctuation">.</span>dropdownMenuEntries<span class="token punctuation">;</span>
    _menuHasEnabledItem <span class="token operator">=</span>
        filteredEntries<span class="token punctuation">.</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">DropdownMenuEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> entry<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> entry<span class="token punctuation">.</span>enabled<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">final</span> int index <span class="token operator">=</span> filteredEntries<span class="token punctuation">.</span><span class="token function">indexWhere</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token class-name">DropdownMenuEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> entry<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> entry<span class="token punctuation">.</span>value <span class="token operator">==</span> widget<span class="token punctuation">.</span>initialSelection<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      _textEditingController<span class="token punctuation">.</span>text <span class="token operator">=</span> filteredEntries<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>label<span class="token punctuation">;</span>
      _textEditingController<span class="token punctuation">.</span>selection <span class="token operator">=</span>
          <span class="token class-name">TextSelection</span><span class="token punctuation">.</span><span class="token function">collapsed</span><span class="token punctuation">(</span>offset<span class="token punctuation">:</span> _textEditingController<span class="token punctuation">.</span>text<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">refreshLeadingPadding</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token metadata function">@override</span>
  <span class="token keyword">void</span> <span class="token function">didUpdateWidget</span><span class="token punctuation">(</span><span class="token class-name">CustomedDropdownMenu</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> oldWidget<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">didUpdateWidget</span><span class="token punctuation">(</span>oldWidget<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>oldWidget<span class="token punctuation">.</span>dropdownMenuEntries <span class="token operator">!=</span> widget<span class="token punctuation">.</span>dropdownMenuEntries<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      _menuHasEnabledItem <span class="token operator">=</span>
          filteredEntries<span class="token punctuation">.</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">DropdownMenuEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> entry<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> entry<span class="token punctuation">.</span>enabled<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>oldWidget<span class="token punctuation">.</span>leadingIcon <span class="token operator">!=</span> widget<span class="token punctuation">.</span>leadingIcon<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token function">refreshLeadingPadding</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>oldWidget<span class="token punctuation">.</span>initialSelection <span class="token operator">!=</span> widget<span class="token punctuation">.</span>initialSelection<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">final</span> int index <span class="token operator">=</span> filteredEntries<span class="token punctuation">.</span><span class="token function">indexWhere</span><span class="token punctuation">(</span>
          <span class="token punctuation">(</span><span class="token class-name">DropdownMenuEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> entry<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span>
              entry<span class="token punctuation">.</span>value <span class="token operator">==</span> widget<span class="token punctuation">.</span>initialSelection<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        _textEditingController<span class="token punctuation">.</span>text <span class="token operator">=</span> filteredEntries<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>label<span class="token punctuation">;</span>
        _textEditingController<span class="token punctuation">.</span>selection <span class="token operator">=</span>
            <span class="token class-name">TextSelection</span><span class="token punctuation">.</span><span class="token function">collapsed</span><span class="token punctuation">(</span>offset<span class="token punctuation">:</span> _textEditingController<span class="token punctuation">.</span>text<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>

  bool <span class="token function">canRequestFocus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>widget<span class="token punctuation">.</span>requestFocusOnTap <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">return</span> widget<span class="token punctuation">.</span>requestFocusOnTap<span class="token operator">!</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token class-name">Theme</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span>platform<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">case</span> <span class="token class-name">TargetPlatform</span><span class="token punctuation">.</span>iOS<span class="token punctuation">:</span>
      <span class="token keyword">case</span> <span class="token class-name">TargetPlatform</span><span class="token punctuation">.</span>android<span class="token punctuation">:</span>
      <span class="token keyword">case</span> <span class="token class-name">TargetPlatform</span><span class="token punctuation">.</span>fuchsia<span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token class-name">TargetPlatform</span><span class="token punctuation">.</span>macOS<span class="token punctuation">:</span>
      <span class="token keyword">case</span> <span class="token class-name">TargetPlatform</span><span class="token punctuation">.</span>linux<span class="token punctuation">:</span>
      <span class="token keyword">case</span> <span class="token class-name">TargetPlatform</span><span class="token punctuation">.</span>windows<span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token keyword">void</span> <span class="token function">refreshLeadingPadding</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">WidgetsBinding</span><span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">addPostFrameCallback</span><span class="token punctuation">(</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        leadingPadding <span class="token operator">=</span> <span class="token function">getWidth</span><span class="token punctuation">(</span>_leadingKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  double<span class="token operator">?</span> <span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token class-name">GlobalKey</span> key<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">final</span> <span class="token class-name">BuildContext</span><span class="token operator">?</span> context <span class="token operator">=</span> key<span class="token punctuation">.</span>currentContext<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>context <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">final</span> <span class="token class-name">RenderBox</span> box <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">findRenderObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">!</span> <span class="token operator">as</span> <span class="token class-name">RenderBox</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> box<span class="token punctuation">.</span>size<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DropdownMenuEntry</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span><span class="token punctuation">></span></span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DropdownMenuEntry</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span><span class="token punctuation">></span></span> entries<span class="token punctuation">,</span>
      <span class="token class-name">TextEditingController</span> textEditingController<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">final</span> <span class="token class-name">String</span> filterText <span class="token operator">=</span> textEditingController<span class="token punctuation">.</span>text<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> entries
        <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">DropdownMenuEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> entry<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span>
            entry<span class="token punctuation">.</span>label<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>filterText<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  int<span class="token operator">?</span> <span class="token function">search</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DropdownMenuEntry</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span><span class="token punctuation">></span></span> entries<span class="token punctuation">,</span>
      <span class="token class-name">TextEditingController</span> textEditingController<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">final</span> <span class="token class-name">String</span> searchText <span class="token operator">=</span> textEditingController<span class="token punctuation">.</span>value<span class="token punctuation">.</span>text<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>searchText<span class="token punctuation">.</span>isEmpty<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">final</span> int index <span class="token operator">=</span> entries<span class="token punctuation">.</span><span class="token function">indexWhere</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">DropdownMenuEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> entry<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span>
        entry<span class="token punctuation">.</span>label<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>searchText<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> index <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">?</span> index <span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">></span></span> <span class="token function">_buildButtons</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DropdownMenuEntry</span><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span><span class="token punctuation">></span></span> filteredEntries<span class="token punctuation">,</span>
      <span class="token class-name">TextEditingController</span> textEditingController<span class="token punctuation">,</span> <span class="token class-name">TextDirection</span> textDirection<span class="token punctuation">,</span>
      <span class="token punctuation">&#123;</span>int<span class="token operator">?</span> focusedIndex<span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">></span></span> result <span class="token operator">=</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">></span></span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">final</span> double padding <span class="token operator">=</span> leadingPadding <span class="token operator">?</span><span class="token operator">?</span> _kDefaultHorizontalPadding<span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token class-name">ButtonStyle</span> defaultStyle<span class="token punctuation">;</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span>textDirection<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">case</span> <span class="token class-name">TextDirection</span><span class="token punctuation">.</span>rtl<span class="token punctuation">:</span>
        defaultStyle <span class="token operator">=</span> <span class="token class-name">MenuItemButton</span><span class="token punctuation">.</span><span class="token function">styleFrom</span><span class="token punctuation">(</span>
          padding<span class="token punctuation">:</span>
              <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">only</span><span class="token punctuation">(</span>left<span class="token punctuation">:</span> _kDefaultHorizontalPadding<span class="token punctuation">,</span> right<span class="token punctuation">:</span> padding<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
      <span class="token keyword">case</span> <span class="token class-name">TextDirection</span><span class="token punctuation">.</span>ltr<span class="token punctuation">:</span>
        defaultStyle <span class="token operator">=</span> <span class="token class-name">MenuItemButton</span><span class="token punctuation">.</span><span class="token function">styleFrom</span><span class="token punctuation">(</span>
          padding<span class="token punctuation">:</span>
              <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">only</span><span class="token punctuation">(</span>left<span class="token punctuation">:</span> padding<span class="token punctuation">,</span> right<span class="token punctuation">:</span> _kDefaultHorizontalPadding<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> filteredEntries<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">final</span> <span class="token class-name">DropdownMenuEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> entry <span class="token operator">=</span> filteredEntries<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token class-name">ButtonStyle</span> effectiveStyle <span class="token operator">=</span> entry<span class="token punctuation">.</span>style <span class="token operator">?</span><span class="token operator">?</span> defaultStyle<span class="token punctuation">;</span>
      <span class="token keyword">final</span> <span class="token class-name">Color</span> focusedBackgroundColor <span class="token operator">=</span> effectiveStyle<span class="token punctuation">.</span>foregroundColor
              <span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MaterialState</span><span class="token punctuation">></span></span><span class="token punctuation">&#123;</span><span class="token class-name">MaterialState</span><span class="token punctuation">.</span>focused<span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token operator">?</span><span class="token operator">?</span>
          <span class="token class-name">Theme</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span>colorScheme<span class="token punctuation">.</span>onSurface<span class="token punctuation">;</span>

      <span class="token comment">// Simulate the focused state because the text field should always be focused</span>
      <span class="token comment">// during traversal. If the menu item has a custom foreground color, the "focused"</span>
      <span class="token comment">// color will also change to foregroundColor.withOpacity(0.12).</span>
      effectiveStyle <span class="token operator">=</span> entry<span class="token punctuation">.</span>enabled <span class="token operator">&amp;&amp;</span> i <span class="token operator">==</span> focusedIndex
          <span class="token operator">?</span> effectiveStyle<span class="token punctuation">.</span><span class="token function">copyWith</span><span class="token punctuation">(</span>
              backgroundColor<span class="token punctuation">:</span> <span class="token class-name">MaterialStatePropertyAll</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Color</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>
                  focusedBackgroundColor<span class="token punctuation">.</span><span class="token function">withOpacity</span><span class="token punctuation">(</span><span class="token number">0.12</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
          <span class="token punctuation">:</span> effectiveStyle<span class="token punctuation">;</span>

      <span class="token keyword">final</span> <span class="token class-name">MenuItemButton</span> menuItemButton <span class="token operator">=</span> <span class="token class-name">MenuItemButton</span><span class="token punctuation">(</span>
        style<span class="token punctuation">:</span> effectiveStyle<span class="token punctuation">,</span>
        leadingIcon<span class="token punctuation">:</span> entry<span class="token punctuation">.</span>leadingIcon<span class="token punctuation">,</span>
        trailingIcon<span class="token punctuation">:</span> entry<span class="token punctuation">.</span>trailingIcon<span class="token punctuation">,</span>
        onPressed<span class="token punctuation">:</span> entry<span class="token punctuation">.</span>enabled
            <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                textEditingController<span class="token punctuation">.</span>text <span class="token operator">=</span> entry<span class="token punctuation">.</span>label<span class="token punctuation">;</span>
                textEditingController<span class="token punctuation">.</span>selection <span class="token operator">=</span> <span class="token class-name">TextSelection</span><span class="token punctuation">.</span><span class="token function">collapsed</span><span class="token punctuation">(</span>
                    offset<span class="token punctuation">:</span> textEditingController<span class="token punctuation">.</span>text<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
                currentHighlight <span class="token operator">=</span> widget<span class="token punctuation">.</span>enableSearch <span class="token operator">?</span> i <span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                widget<span class="token punctuation">.</span>onSelected<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">&#125;</span>
            <span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        requestFocusOnHover<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        child<span class="token punctuation">:</span> <span class="token class-name">Text</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span>label<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
      result<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>menuItemButton<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">return</span> result<span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token keyword">void</span> <span class="token function">handleUpKeyInvoke</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>_menuHasEnabledItem <span class="token operator">||</span> <span class="token operator">!</span>_controller<span class="token punctuation">.</span>isOpen<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
          <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        _enableFilter <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        currentHighlight <span class="token operator">?</span><span class="token operator">?</span><span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        currentHighlight <span class="token operator">=</span> <span class="token punctuation">(</span>currentHighlight<span class="token operator">!</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> filteredEntries<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>filteredEntries<span class="token punctuation">[</span>currentHighlight<span class="token operator">!</span><span class="token punctuation">]</span><span class="token punctuation">.</span>enabled<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
          currentHighlight <span class="token operator">=</span> <span class="token punctuation">(</span>currentHighlight<span class="token operator">!</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> filteredEntries<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">final</span> <span class="token class-name">String</span> currentLabel <span class="token operator">=</span> filteredEntries<span class="token punctuation">[</span>currentHighlight<span class="token operator">!</span><span class="token punctuation">]</span><span class="token punctuation">.</span>label<span class="token punctuation">;</span>
        _textEditingController<span class="token punctuation">.</span>text <span class="token operator">=</span> currentLabel<span class="token punctuation">;</span>
        _textEditingController<span class="token punctuation">.</span>selection <span class="token operator">=</span>
            <span class="token class-name">TextSelection</span><span class="token punctuation">.</span><span class="token function">collapsed</span><span class="token punctuation">(</span>offset<span class="token punctuation">:</span> _textEditingController<span class="token punctuation">.</span>text<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">void</span> <span class="token function">handleDownKeyInvoke</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>_menuHasEnabledItem <span class="token operator">||</span> <span class="token operator">!</span>_controller<span class="token punctuation">.</span>isOpen<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
          <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        _enableFilter <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        currentHighlight <span class="token operator">?</span><span class="token operator">?</span><span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        currentHighlight <span class="token operator">=</span> <span class="token punctuation">(</span>currentHighlight<span class="token operator">!</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> filteredEntries<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>filteredEntries<span class="token punctuation">[</span>currentHighlight<span class="token operator">!</span><span class="token punctuation">]</span><span class="token punctuation">.</span>enabled<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
          currentHighlight <span class="token operator">=</span> <span class="token punctuation">(</span>currentHighlight<span class="token operator">!</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> filteredEntries<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">final</span> <span class="token class-name">String</span> currentLabel <span class="token operator">=</span> filteredEntries<span class="token punctuation">[</span>currentHighlight<span class="token operator">!</span><span class="token punctuation">]</span><span class="token punctuation">.</span>label<span class="token punctuation">;</span>
        _textEditingController<span class="token punctuation">.</span>text <span class="token operator">=</span> currentLabel<span class="token punctuation">;</span>
        _textEditingController<span class="token punctuation">.</span>selection <span class="token operator">=</span>
            <span class="token class-name">TextSelection</span><span class="token punctuation">.</span><span class="token function">collapsed</span><span class="token punctuation">(</span>offset<span class="token punctuation">:</span> _textEditingController<span class="token punctuation">.</span>text<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">void</span> <span class="token function">handlePressed</span><span class="token punctuation">(</span><span class="token class-name">MenuController</span> controller<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>controller<span class="token punctuation">.</span>isOpen<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      currentHighlight <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      controller<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
      <span class="token comment">// close to open</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>_textEditingController<span class="token punctuation">.</span>text<span class="token punctuation">.</span>isNotEmpty<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        _enableFilter <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>
      controller<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token metadata function">@override</span>
  <span class="token keyword">void</span> <span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">Widget</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">final</span> <span class="token class-name">TextDirection</span> textDirection <span class="token operator">=</span> <span class="token class-name">Directionality</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    _initialMenu <span class="token operator">?</span><span class="token operator">?</span><span class="token operator">=</span> <span class="token function">_buildButtons</span><span class="token punctuation">(</span>
        widget<span class="token punctuation">.</span>dropdownMenuEntries<span class="token punctuation">,</span> _textEditingController<span class="token punctuation">,</span> textDirection<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token class-name">DropdownMenuThemeData</span> theme <span class="token operator">=</span> <span class="token class-name">DropdownMenuTheme</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token class-name">DropdownMenuThemeData</span> defaults <span class="token operator">=</span> <span class="token function">_DropdownMenuDefaultsM3</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>_enableFilter<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      filteredEntries <span class="token operator">=</span>
          <span class="token function">filter</span><span class="token punctuation">(</span>widget<span class="token punctuation">.</span>dropdownMenuEntries<span class="token punctuation">,</span> _textEditingController<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>widget<span class="token punctuation">.</span>enableSearch<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      currentHighlight <span class="token operator">=</span> <span class="token function">search</span><span class="token punctuation">(</span>filteredEntries<span class="token punctuation">,</span> _textEditingController<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">final</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">></span></span> menu <span class="token operator">=</span> <span class="token function">_buildButtons</span><span class="token punctuation">(</span>
        filteredEntries<span class="token punctuation">,</span> _textEditingController<span class="token punctuation">,</span> textDirection<span class="token punctuation">,</span>
        focusedIndex<span class="token punctuation">:</span> currentHighlight<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">final</span> <span class="token class-name">TextStyle</span><span class="token operator">?</span> effectiveTextStyle <span class="token operator">=</span>
        widget<span class="token punctuation">.</span>textStyle <span class="token operator">?</span><span class="token operator">?</span> theme<span class="token punctuation">.</span>textStyle <span class="token operator">?</span><span class="token operator">?</span> defaults<span class="token punctuation">.</span>textStyle<span class="token punctuation">;</span>

    <span class="token class-name">MenuStyle</span><span class="token operator">?</span> effectiveMenuStyle <span class="token operator">=</span>
        widget<span class="token punctuation">.</span>menuStyle <span class="token operator">?</span><span class="token operator">?</span> theme<span class="token punctuation">.</span>menuStyle <span class="token operator">?</span><span class="token operator">?</span> defaults<span class="token punctuation">.</span>menuStyle<span class="token operator">!</span><span class="token punctuation">;</span>

    <span class="token keyword">final</span> double<span class="token operator">?</span> anchorWidth <span class="token operator">=</span> <span class="token function">getWidth</span><span class="token punctuation">(</span>_anchorKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>widget<span class="token punctuation">.</span>width <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      effectiveMenuStyle <span class="token operator">=</span> effectiveMenuStyle<span class="token punctuation">.</span><span class="token function">copyWith</span><span class="token punctuation">(</span>
          minimumSize<span class="token punctuation">:</span>
              <span class="token class-name">MaterialStatePropertyAll</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Size</span><span class="token operator">?</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token class-name">Size</span><span class="token punctuation">(</span>widget<span class="token punctuation">.</span>width<span class="token operator">!</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>anchorWidth <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      effectiveMenuStyle <span class="token operator">=</span> effectiveMenuStyle<span class="token punctuation">.</span><span class="token function">copyWith</span><span class="token punctuation">(</span>
          minimumSize<span class="token punctuation">:</span> <span class="token class-name">MaterialStatePropertyAll</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Size</span><span class="token operator">?</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token class-name">Size</span><span class="token punctuation">(</span>anchorWidth<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>widget<span class="token punctuation">.</span>menuHeight <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      effectiveMenuStyle <span class="token operator">=</span> effectiveMenuStyle<span class="token punctuation">.</span><span class="token function">copyWith</span><span class="token punctuation">(</span>
          maximumSize<span class="token punctuation">:</span> <span class="token class-name">MaterialStatePropertyAll</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Size</span><span class="token punctuation">></span></span><span class="token punctuation">(</span>
              <span class="token class-name">Size</span><span class="token punctuation">(</span>double<span class="token punctuation">.</span>infinity<span class="token punctuation">,</span> widget<span class="token punctuation">.</span>menuHeight<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">final</span> <span class="token class-name">InputDecorationTheme</span> effectiveInputDecorationTheme <span class="token operator">=</span>
        widget<span class="token punctuation">.</span>inputDecorationTheme <span class="token operator">?</span><span class="token operator">?</span>
            theme<span class="token punctuation">.</span>inputDecorationTheme <span class="token operator">?</span><span class="token operator">?</span>
            defaults<span class="token punctuation">.</span>inputDecorationTheme<span class="token operator">!</span><span class="token punctuation">;</span>

    <span class="token keyword">final</span> <span class="token class-name">MouseCursor</span> effectiveMouseCursor <span class="token operator">=</span>
        <span class="token function">canRequestFocus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token class-name">SystemMouseCursors</span><span class="token punctuation">.</span>text <span class="token punctuation">:</span> <span class="token class-name">SystemMouseCursors</span><span class="token punctuation">.</span>click<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token class-name">Shortcuts</span><span class="token punctuation">(</span>
      shortcuts<span class="token punctuation">:</span> _kMenuTraversalShortcuts<span class="token punctuation">,</span>
      child<span class="token punctuation">:</span> <span class="token class-name">Actions</span><span class="token punctuation">(</span>
        actions<span class="token punctuation">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Type</span><span class="token punctuation">,</span> <span class="token class-name">Action</span><span class="token punctuation">&lt;</span><span class="token class-name">Intent</span><span class="token punctuation">></span><span class="token punctuation">></span></span><span class="token punctuation">&#123;</span>
          _ArrowUpIntent<span class="token punctuation">:</span> <span class="token class-name">CallbackAction</span><span class="token generics"><span class="token punctuation">&lt;</span>_ArrowUpIntent<span class="token punctuation">></span></span><span class="token punctuation">(</span>
            onInvoke<span class="token punctuation">:</span> handleUpKeyInvoke<span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
          _ArrowDownIntent<span class="token punctuation">:</span> <span class="token class-name">CallbackAction</span><span class="token generics"><span class="token punctuation">&lt;</span>_ArrowDownIntent<span class="token punctuation">></span></span><span class="token punctuation">(</span>
            onInvoke<span class="token punctuation">:</span> handleDownKeyInvoke<span class="token punctuation">,</span>
          <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        child<span class="token punctuation">:</span> <span class="token class-name">MenuAnchor</span><span class="token punctuation">(</span>
          style<span class="token punctuation">:</span> effectiveMenuStyle<span class="token punctuation">,</span>
          controller<span class="token punctuation">:</span> _controller<span class="token punctuation">,</span>
          menuChildren<span class="token punctuation">:</span> menu<span class="token punctuation">,</span>
          crossAxisUnconstrained<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 将建议设置为与搜索框宽度相同</span>
          onClose<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token comment">// setState(() &#123;&#125;);</span>
          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token comment">// To update the status of the IconButton</span>

          <span class="token comment">// 搜索框布局</span>
          builder<span class="token punctuation">:</span>
              <span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">,</span> <span class="token class-name">MenuController</span> controller<span class="token punctuation">,</span> <span class="token class-name">Widget</span><span class="token operator">?</span> child<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">assert</span><span class="token punctuation">(</span>_initialMenu <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">final</span> <span class="token class-name">Widget</span><span class="token operator">?</span> trailingButton<span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>widget<span class="token punctuation">.</span>trailingIcon <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
              trailingButton <span class="token operator">=</span> <span class="token class-name">Padding</span><span class="token punctuation">(</span>
                padding<span class="token punctuation">:</span> <span class="token keyword">const</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">4.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                child<span class="token punctuation">:</span> <span class="token class-name">IconButton</span><span class="token punctuation">(</span>
                  isSelected<span class="token punctuation">:</span> controller<span class="token punctuation">.</span>isOpen<span class="token punctuation">,</span>
                  icon<span class="token punctuation">:</span>
                      widget<span class="token punctuation">.</span>trailingIcon <span class="token operator">?</span><span class="token operator">?</span> <span class="token keyword">const</span> <span class="token class-name">Icon</span><span class="token punctuation">(</span><span class="token class-name">Icons</span><span class="token punctuation">.</span>arrow_drop_down<span class="token punctuation">)</span><span class="token punctuation">,</span>
                  selectedIcon<span class="token punctuation">:</span> widget<span class="token punctuation">.</span>selectedTrailingIcon <span class="token operator">?</span><span class="token operator">?</span>
                      <span class="token keyword">const</span> <span class="token class-name">Icon</span><span class="token punctuation">(</span><span class="token class-name">Icons</span><span class="token punctuation">.</span>arrow_drop_up<span class="token punctuation">)</span><span class="token punctuation">,</span>
                  onPressed<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token function">handlePressed</span><span class="token punctuation">(</span>controller<span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
              <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
              trailingButton <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>

            <span class="token keyword">final</span> <span class="token class-name">Widget</span> leadingButton <span class="token operator">=</span> <span class="token class-name">Padding</span><span class="token punctuation">(</span>
                padding<span class="token punctuation">:</span> <span class="token keyword">const</span> <span class="token class-name">EdgeInsets</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">8.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                child<span class="token punctuation">:</span> widget<span class="token punctuation">.</span>leadingIcon <span class="token operator">?</span><span class="token operator">?</span> <span class="token keyword">const</span> <span class="token class-name">SizedBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">return</span> <span class="token function">_DropdownMenuBody</span><span class="token punctuation">(</span>
              width<span class="token punctuation">:</span> widget<span class="token punctuation">.</span>width<span class="token punctuation">,</span>
              children<span class="token punctuation">:</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Widget</span><span class="token punctuation">></span></span><span class="token punctuation">[</span>
                <span class="token class-name">TextField</span><span class="token punctuation">(</span>
                    key<span class="token punctuation">:</span> _anchorKey<span class="token punctuation">,</span>
                    mouseCursor<span class="token punctuation">:</span> effectiveMouseCursor<span class="token punctuation">,</span>
                    canRequestFocus<span class="token punctuation">:</span> <span class="token function">canRequestFocus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    enableInteractiveSelection<span class="token punctuation">:</span> <span class="token function">canRequestFocus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    textAlignVertical<span class="token punctuation">:</span> <span class="token class-name">TextAlignVertical</span><span class="token punctuation">.</span>center<span class="token punctuation">,</span>
                    style<span class="token punctuation">:</span> effectiveTextStyle<span class="token punctuation">,</span>
                    controller<span class="token punctuation">:</span> _textEditingController<span class="token punctuation">,</span>
                    onEditingComplete<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                      <span class="token keyword">if</span> <span class="token punctuation">(</span>currentHighlight <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                        <span class="token keyword">final</span> <span class="token class-name">DropdownMenuEntry</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> entry <span class="token operator">=</span>
                            filteredEntries<span class="token punctuation">[</span>currentHighlight<span class="token operator">!</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>entry<span class="token punctuation">.</span>enabled<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                          _textEditingController<span class="token punctuation">.</span>text <span class="token operator">=</span> entry<span class="token punctuation">.</span>label<span class="token punctuation">;</span>
                          _textEditingController<span class="token punctuation">.</span>selection <span class="token operator">=</span>
                              <span class="token class-name">TextSelection</span><span class="token punctuation">.</span><span class="token function">collapsed</span><span class="token punctuation">(</span>
                                  offset<span class="token punctuation">:</span> _textEditingController<span class="token punctuation">.</span>text<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
                          widget<span class="token punctuation">.</span>onSelected<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>entry<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">&#125;</span>
                      <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
                        widget<span class="token punctuation">.</span>onSelected<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                      <span class="token punctuation">&#125;</span>
                      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>widget<span class="token punctuation">.</span>enableSearch<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                        currentHighlight <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                      <span class="token punctuation">&#125;</span>
                      <span class="token keyword">if</span> <span class="token punctuation">(</span>_textEditingController<span class="token punctuation">.</span>text<span class="token punctuation">.</span>isNotEmpty<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                        controller<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                      <span class="token punctuation">&#125;</span>
                    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                    onTap<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                      <span class="token function">handlePressed</span><span class="token punctuation">(</span>controller<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                    onChanged<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token class-name">String</span> text<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                      controller<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                      <span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                        filteredEntries <span class="token operator">=</span> widget<span class="token punctuation">.</span>dropdownMenuEntries<span class="token punctuation">;</span>
                        _enableFilter <span class="token operator">=</span> widget<span class="token punctuation">.</span>enableFilter<span class="token punctuation">;</span>
                      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
                    decoration<span class="token punctuation">:</span> <span class="token class-name">InputDecoration</span><span class="token punctuation">(</span>
                      enabled<span class="token punctuation">:</span> widget<span class="token punctuation">.</span>enabled<span class="token punctuation">,</span>
                      label<span class="token punctuation">:</span> widget<span class="token punctuation">.</span>label<span class="token punctuation">,</span>
                      hintText<span class="token punctuation">:</span> widget<span class="token punctuation">.</span>hintText<span class="token punctuation">,</span>
                      helperText<span class="token punctuation">:</span> widget<span class="token punctuation">.</span>helperText<span class="token punctuation">,</span>
                      errorText<span class="token punctuation">:</span> widget<span class="token punctuation">.</span>errorText<span class="token punctuation">,</span>
                      contentPadding<span class="token punctuation">:</span> widget<span class="token punctuation">.</span>contentPadding<span class="token punctuation">,</span>
                      isCollapsed<span class="token punctuation">:</span> widget<span class="token punctuation">.</span>isCollapsed<span class="token punctuation">,</span>
                      prefixIcon<span class="token punctuation">:</span> widget<span class="token punctuation">.</span>leadingIcon <span class="token operator">!=</span> <span class="token keyword">null</span>
                          <span class="token operator">?</span> <span class="token class-name">Container</span><span class="token punctuation">(</span>
                              key<span class="token punctuation">:</span> _leadingKey<span class="token punctuation">,</span> child<span class="token punctuation">:</span> widget<span class="token punctuation">.</span>leadingIcon<span class="token punctuation">)</span>
                          <span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
                      suffixIcon<span class="token punctuation">:</span> trailingButton<span class="token punctuation">,</span>
                    <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">applyDefaults</span><span class="token punctuation">(</span>effectiveInputDecorationTheme<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Widget</span> c <span class="token keyword">in</span> _initialMenu<span class="token operator">!</span><span class="token punctuation">)</span> c<span class="token punctuation">,</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>trailingButton <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> trailingButton<span class="token punctuation">,</span>
                leadingButton<span class="token punctuation">,</span>
              <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">class</span> _ArrowUpIntent <span class="token keyword">extends</span> <span class="token class-name">Intent</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> <span class="token function">_ArrowUpIntent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">class</span> _ArrowDownIntent <span class="token keyword">extends</span> <span class="token class-name">Intent</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> <span class="token function">_ArrowDownIntent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">class</span> _DropdownMenuBody <span class="token keyword">extends</span> <span class="token class-name">MultiChildRenderObjectWidget</span> <span class="token punctuation">&#123;</span>
  <span class="token keyword">const</span> <span class="token function">_DropdownMenuBody</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span>children<span class="token punctuation">,</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>width<span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">final</span> double<span class="token operator">?</span> width<span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  _RenderDropdownMenuBody <span class="token function">createRenderObject</span><span class="token punctuation">(</span><span class="token class-name">BuildContext</span> context<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token function">_RenderDropdownMenuBody</span><span class="token punctuation">(</span>
      width<span class="token punctuation">:</span> width<span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">class</span> _DropdownMenuBodyParentData <span class="token keyword">extends</span> <span class="token class-name">ContainerBoxParentData</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">RenderBox</span><span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>

<span class="token keyword">class</span> _RenderDropdownMenuBody <span class="token keyword">extends</span> <span class="token class-name">RenderBox</span>
    <span class="token keyword">with</span>
        <span class="token class-name">ContainerRenderObjectMixin</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">RenderBox</span><span class="token punctuation">,</span> _DropdownMenuBodyParentData<span class="token punctuation">></span></span><span class="token punctuation">,</span>
        <span class="token class-name">RenderBoxContainerDefaultsMixin</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">RenderBox</span><span class="token punctuation">,</span>
            _DropdownMenuBodyParentData<span class="token punctuation">></span></span> <span class="token punctuation">&#123;</span>
  <span class="token function">_RenderDropdownMenuBody</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>width<span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">final</span> double<span class="token operator">?</span> width<span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  <span class="token keyword">void</span> <span class="token function">setupParentData</span><span class="token punctuation">(</span><span class="token class-name">RenderBox</span> child<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>child<span class="token punctuation">.</span>parentData <span class="token operator">is!</span> _DropdownMenuBodyParentData<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      child<span class="token punctuation">.</span>parentData <span class="token operator">=</span> <span class="token function">_DropdownMenuBodyParentData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token metadata function">@override</span>
  <span class="token keyword">void</span> <span class="token function">performLayout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">final</span> <span class="token class-name">BoxConstraints</span> constraints <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>constraints<span class="token punctuation">;</span>
    double maxWidth <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>
    double<span class="token operator">?</span> maxHeight<span class="token punctuation">;</span>
    <span class="token class-name">RenderBox</span><span class="token operator">?</span> child <span class="token operator">=</span> firstChild<span class="token punctuation">;</span>

    <span class="token keyword">final</span> <span class="token class-name">BoxConstraints</span> innerConstraints <span class="token operator">=</span> <span class="token class-name">BoxConstraints</span><span class="token punctuation">(</span>
      maxWidth<span class="token punctuation">:</span> width <span class="token operator">?</span><span class="token operator">?</span> <span class="token function">computeMaxIntrinsicWidth</span><span class="token punctuation">(</span>constraints<span class="token punctuation">.</span>maxWidth<span class="token punctuation">)</span><span class="token punctuation">,</span>
      maxHeight<span class="token punctuation">:</span> <span class="token function">computeMaxIntrinsicHeight</span><span class="token punctuation">(</span>constraints<span class="token punctuation">.</span>maxHeight<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>child <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>child <span class="token operator">==</span> firstChild<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        child<span class="token punctuation">.</span><span class="token function">layout</span><span class="token punctuation">(</span>innerConstraints<span class="token punctuation">,</span> parentUsesSize<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        maxHeight <span class="token operator">?</span><span class="token operator">?</span><span class="token operator">=</span> child<span class="token punctuation">.</span>size<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
        <span class="token keyword">final</span> _DropdownMenuBodyParentData childParentData <span class="token operator">=</span>
            child<span class="token punctuation">.</span>parentData<span class="token operator">!</span> <span class="token operator">as</span> _DropdownMenuBodyParentData<span class="token punctuation">;</span>
        <span class="token keyword">assert</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span>parentData <span class="token operator">==</span> childParentData<span class="token punctuation">)</span><span class="token punctuation">;</span>
        child <span class="token operator">=</span> childParentData<span class="token punctuation">.</span>nextSibling<span class="token punctuation">;</span>
        <span class="token keyword">continue</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>
      child<span class="token punctuation">.</span><span class="token function">layout</span><span class="token punctuation">(</span>innerConstraints<span class="token punctuation">,</span> parentUsesSize<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">final</span> _DropdownMenuBodyParentData childParentData <span class="token operator">=</span>
          child<span class="token punctuation">.</span>parentData<span class="token operator">!</span> <span class="token operator">as</span> _DropdownMenuBodyParentData<span class="token punctuation">;</span>
      childParentData<span class="token punctuation">.</span>offset <span class="token operator">=</span> <span class="token class-name">Offset</span><span class="token punctuation">.</span>zero<span class="token punctuation">;</span>
      maxWidth <span class="token operator">=</span> math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>maxWidth<span class="token punctuation">,</span> child<span class="token punctuation">.</span>size<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
      maxHeight <span class="token operator">?</span><span class="token operator">?</span><span class="token operator">=</span> child<span class="token punctuation">.</span>size<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
      <span class="token keyword">assert</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span>parentData <span class="token operator">==</span> childParentData<span class="token punctuation">)</span><span class="token punctuation">;</span>
      child <span class="token operator">=</span> childParentData<span class="token punctuation">.</span>nextSibling<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">assert</span><span class="token punctuation">(</span>maxHeight <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    maxWidth <span class="token operator">=</span> math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>_kMinimumWidth<span class="token punctuation">,</span> maxWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>
    size <span class="token operator">=</span> constraints<span class="token punctuation">.</span><span class="token function">constrain</span><span class="token punctuation">(</span><span class="token class-name">Size</span><span class="token punctuation">(</span>width <span class="token operator">?</span><span class="token operator">?</span> maxWidth<span class="token punctuation">,</span> maxHeight<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token metadata function">@override</span>
  <span class="token keyword">void</span> <span class="token function">paint</span><span class="token punctuation">(</span><span class="token class-name">PaintingContext</span> context<span class="token punctuation">,</span> <span class="token class-name">Offset</span> offset<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">final</span> <span class="token class-name">RenderBox</span><span class="token operator">?</span> child <span class="token operator">=</span> firstChild<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>child <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">final</span> _DropdownMenuBodyParentData childParentData <span class="token operator">=</span>
          child<span class="token punctuation">.</span>parentData<span class="token operator">!</span> <span class="token operator">as</span> _DropdownMenuBodyParentData<span class="token punctuation">;</span>
      context<span class="token punctuation">.</span><span class="token function">paintChild</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> offset <span class="token operator">+</span> childParentData<span class="token punctuation">.</span>offset<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">Size</span> <span class="token function">computeDryLayout</span><span class="token punctuation">(</span><span class="token class-name">BoxConstraints</span> constraints<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">final</span> <span class="token class-name">BoxConstraints</span> constraints <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>constraints<span class="token punctuation">;</span>
    double maxWidth <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>
    double<span class="token operator">?</span> maxHeight<span class="token punctuation">;</span>
    <span class="token class-name">RenderBox</span><span class="token operator">?</span> child <span class="token operator">=</span> firstChild<span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token class-name">BoxConstraints</span> innerConstraints <span class="token operator">=</span> <span class="token class-name">BoxConstraints</span><span class="token punctuation">(</span>
      maxWidth<span class="token punctuation">:</span> width <span class="token operator">?</span><span class="token operator">?</span> <span class="token function">computeMaxIntrinsicWidth</span><span class="token punctuation">(</span>constraints<span class="token punctuation">.</span>maxWidth<span class="token punctuation">)</span><span class="token punctuation">,</span>
      maxHeight<span class="token punctuation">:</span> <span class="token function">computeMaxIntrinsicHeight</span><span class="token punctuation">(</span>constraints<span class="token punctuation">.</span>maxHeight<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">while</span> <span class="token punctuation">(</span>child <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>child <span class="token operator">==</span> firstChild<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">final</span> <span class="token class-name">Size</span> childSize <span class="token operator">=</span> child<span class="token punctuation">.</span><span class="token function">getDryLayout</span><span class="token punctuation">(</span>innerConstraints<span class="token punctuation">)</span><span class="token punctuation">;</span>
        maxHeight <span class="token operator">?</span><span class="token operator">?</span><span class="token operator">=</span> childSize<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
        <span class="token keyword">final</span> _DropdownMenuBodyParentData childParentData <span class="token operator">=</span>
            child<span class="token punctuation">.</span>parentData<span class="token operator">!</span> <span class="token operator">as</span> _DropdownMenuBodyParentData<span class="token punctuation">;</span>
        <span class="token keyword">assert</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span>parentData <span class="token operator">==</span> childParentData<span class="token punctuation">)</span><span class="token punctuation">;</span>
        child <span class="token operator">=</span> childParentData<span class="token punctuation">.</span>nextSibling<span class="token punctuation">;</span>
        <span class="token keyword">continue</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>
      <span class="token keyword">final</span> <span class="token class-name">Size</span> childSize <span class="token operator">=</span> child<span class="token punctuation">.</span><span class="token function">getDryLayout</span><span class="token punctuation">(</span>innerConstraints<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">final</span> _DropdownMenuBodyParentData childParentData <span class="token operator">=</span>
          child<span class="token punctuation">.</span>parentData<span class="token operator">!</span> <span class="token operator">as</span> _DropdownMenuBodyParentData<span class="token punctuation">;</span>
      childParentData<span class="token punctuation">.</span>offset <span class="token operator">=</span> <span class="token class-name">Offset</span><span class="token punctuation">.</span>zero<span class="token punctuation">;</span>
      maxWidth <span class="token operator">=</span> math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>maxWidth<span class="token punctuation">,</span> childSize<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
      maxHeight <span class="token operator">?</span><span class="token operator">?</span><span class="token operator">=</span> childSize<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
      <span class="token keyword">assert</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span>parentData <span class="token operator">==</span> childParentData<span class="token punctuation">)</span><span class="token punctuation">;</span>
      child <span class="token operator">=</span> childParentData<span class="token punctuation">.</span>nextSibling<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">assert</span><span class="token punctuation">(</span>maxHeight <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    maxWidth <span class="token operator">=</span> math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>_kMinimumWidth<span class="token punctuation">,</span> maxWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> constraints<span class="token punctuation">.</span><span class="token function">constrain</span><span class="token punctuation">(</span><span class="token class-name">Size</span><span class="token punctuation">(</span>width <span class="token operator">?</span><span class="token operator">?</span> maxWidth<span class="token punctuation">,</span> maxHeight<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token metadata function">@override</span>
  double <span class="token function">computeMinIntrinsicWidth</span><span class="token punctuation">(</span>double height<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">RenderBox</span><span class="token operator">?</span> child <span class="token operator">=</span> firstChild<span class="token punctuation">;</span>
    double width <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>child <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>child <span class="token operator">==</span> firstChild<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">final</span> _DropdownMenuBodyParentData childParentData <span class="token operator">=</span>
            child<span class="token punctuation">.</span>parentData<span class="token operator">!</span> <span class="token operator">as</span> _DropdownMenuBodyParentData<span class="token punctuation">;</span>
        child <span class="token operator">=</span> childParentData<span class="token punctuation">.</span>nextSibling<span class="token punctuation">;</span>
        <span class="token keyword">continue</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>
      <span class="token keyword">final</span> double maxIntrinsicWidth <span class="token operator">=</span> child<span class="token punctuation">.</span><span class="token function">getMinIntrinsicWidth</span><span class="token punctuation">(</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>child <span class="token operator">==</span> lastChild<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        width <span class="token operator">+=</span> maxIntrinsicWidth<span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>child <span class="token operator">==</span> <span class="token function">childBefore</span><span class="token punctuation">(</span>lastChild<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        width <span class="token operator">+=</span> maxIntrinsicWidth<span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>
      width <span class="token operator">=</span> math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> maxIntrinsicWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">final</span> _DropdownMenuBodyParentData childParentData <span class="token operator">=</span>
          child<span class="token punctuation">.</span>parentData<span class="token operator">!</span> <span class="token operator">as</span> _DropdownMenuBodyParentData<span class="token punctuation">;</span>
      child <span class="token operator">=</span> childParentData<span class="token punctuation">.</span>nextSibling<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">return</span> math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> _kMinimumWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token metadata function">@override</span>
  double <span class="token function">computeMaxIntrinsicWidth</span><span class="token punctuation">(</span>double height<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token class-name">RenderBox</span><span class="token operator">?</span> child <span class="token operator">=</span> firstChild<span class="token punctuation">;</span>
    double width <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>child <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>child <span class="token operator">==</span> firstChild<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">final</span> _DropdownMenuBodyParentData childParentData <span class="token operator">=</span>
            child<span class="token punctuation">.</span>parentData<span class="token operator">!</span> <span class="token operator">as</span> _DropdownMenuBodyParentData<span class="token punctuation">;</span>
        child <span class="token operator">=</span> childParentData<span class="token punctuation">.</span>nextSibling<span class="token punctuation">;</span>
        <span class="token keyword">continue</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>
      <span class="token keyword">final</span> double maxIntrinsicWidth <span class="token operator">=</span> child<span class="token punctuation">.</span><span class="token function">getMaxIntrinsicWidth</span><span class="token punctuation">(</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// Add the width of leading Icon.</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>child <span class="token operator">==</span> lastChild<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        width <span class="token operator">+=</span> maxIntrinsicWidth<span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>
      <span class="token comment">// Add the width of trailing Icon.</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>child <span class="token operator">==</span> <span class="token function">childBefore</span><span class="token punctuation">(</span>lastChild<span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        width <span class="token operator">+=</span> maxIntrinsicWidth<span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>
      width <span class="token operator">=</span> math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> maxIntrinsicWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">final</span> _DropdownMenuBodyParentData childParentData <span class="token operator">=</span>
          child<span class="token punctuation">.</span>parentData<span class="token operator">!</span> <span class="token operator">as</span> _DropdownMenuBodyParentData<span class="token punctuation">;</span>
      child <span class="token operator">=</span> childParentData<span class="token punctuation">.</span>nextSibling<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">return</span> math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> _kMinimumWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token metadata function">@override</span>
  double <span class="token function">computeMinIntrinsicHeight</span><span class="token punctuation">(</span>double height<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">final</span> <span class="token class-name">RenderBox</span><span class="token operator">?</span> child <span class="token operator">=</span> firstChild<span class="token punctuation">;</span>
    double width <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>child <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      width <span class="token operator">=</span> math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> child<span class="token punctuation">.</span><span class="token function">getMinIntrinsicHeight</span><span class="token punctuation">(</span>height<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> width<span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token metadata function">@override</span>
  double <span class="token function">computeMaxIntrinsicHeight</span><span class="token punctuation">(</span>double height<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">final</span> <span class="token class-name">RenderBox</span><span class="token operator">?</span> child <span class="token operator">=</span> firstChild<span class="token punctuation">;</span>
    double width <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>child <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      width <span class="token operator">=</span> math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> child<span class="token punctuation">.</span><span class="token function">getMaxIntrinsicHeight</span><span class="token punctuation">(</span>height<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> width<span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token metadata function">@override</span>
  bool <span class="token function">hitTestChildren</span><span class="token punctuation">(</span><span class="token class-name">BoxHitTestResult</span> result<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>required <span class="token class-name">Offset</span> position<span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">final</span> <span class="token class-name">RenderBox</span><span class="token operator">?</span> child <span class="token operator">=</span> firstChild<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>child <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token keyword">final</span> _DropdownMenuBodyParentData childParentData <span class="token operator">=</span>
          child<span class="token punctuation">.</span>parentData<span class="token operator">!</span> <span class="token operator">as</span> _DropdownMenuBodyParentData<span class="token punctuation">;</span>
      <span class="token keyword">final</span> bool isHit <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">addWithPaintOffset</span><span class="token punctuation">(</span>
        offset<span class="token punctuation">:</span> childParentData<span class="token punctuation">.</span>offset<span class="token punctuation">,</span>
        position<span class="token punctuation">:</span> position<span class="token punctuation">,</span>
        hitTest<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token class-name">BoxHitTestResult</span> result<span class="token punctuation">,</span> <span class="token class-name">Offset</span> transformed<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
          <span class="token keyword">assert</span><span class="token punctuation">(</span>transformed <span class="token operator">==</span> position <span class="token operator">-</span> childParentData<span class="token punctuation">.</span>offset<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">return</span> child<span class="token punctuation">.</span><span class="token function">hitTest</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> position<span class="token punctuation">:</span> transformed<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>isHit<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// Hand coded defaults. These will be updated once we have tokens/spec.</span>
<span class="token keyword">class</span> _DropdownMenuDefaultsM3 <span class="token keyword">extends</span> <span class="token class-name">DropdownMenuThemeData</span> <span class="token punctuation">&#123;</span>
  <span class="token function">_DropdownMenuDefaultsM3</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">final</span> <span class="token class-name">BuildContext</span> context<span class="token punctuation">;</span>
  late <span class="token keyword">final</span> <span class="token class-name">ThemeData</span> _theme <span class="token operator">=</span> <span class="token class-name">Theme</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">TextStyle</span><span class="token operator">?</span> <span class="token keyword">get</span> textStyle <span class="token operator">=</span><span class="token operator">></span> _theme<span class="token punctuation">.</span>textTheme<span class="token punctuation">.</span>labelLarge<span class="token punctuation">;</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">MenuStyle</span> <span class="token keyword">get</span> menuStyle <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token keyword">const</span> <span class="token class-name">MenuStyle</span><span class="token punctuation">(</span>
      minimumSize<span class="token punctuation">:</span> <span class="token class-name">MaterialStatePropertyAll</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Size</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token class-name">Size</span><span class="token punctuation">(</span>_kMinimumWidth<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      maximumSize<span class="token punctuation">:</span> <span class="token class-name">MaterialStatePropertyAll</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Size</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token class-name">Size</span><span class="token punctuation">.</span>infinite<span class="token punctuation">)</span><span class="token punctuation">,</span>
      visualDensity<span class="token punctuation">:</span> <span class="token class-name">VisualDensity</span><span class="token punctuation">.</span>standard<span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>

  <span class="token metadata function">@override</span>
  <span class="token class-name">InputDecorationTheme</span> <span class="token keyword">get</span> inputDecorationTheme <span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token keyword">const</span> <span class="token class-name">InputDecorationTheme</span><span class="token punctuation">(</span>border<span class="token punctuation">:</span> <span class="token class-name">OutlineInputBorder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="http://princesaoke.github.io/2024/04/01/Flutter%E5%B8%A6%E4%B8%8B%E6%8B%89%E5%BB%BA%E8%AE%AE%E5%88%97%E8%A1%A8%E7%9A%84%E6%90%9C%E7%B4%A2%E6%A1%86/" title="Flutter带下拉建议列表的搜索框" target="_blank" rel="external">http://princesaoke.github.io/2024/04/01/Flutter带下拉建议列表的搜索框/</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://github.com/PrinceSaoKe" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/avatar.jpg" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://github.com/PrinceSaoKe" target="_blank"><span class="text-dark">骚客.</span><small class="ml-1x">Frontend Developer</small></a></h3>
        <div>参观我的个人网站：http://saoke.fun</div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    
  <section id="comments">
  	
      <div id="vcomments"></div>
    
  </section>


  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    <li class="prev">
      <a href="/2024/04/01/Flutter%E4%B8%AD%E7%9A%84Slider/" title="Flutter中的Slider"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a>
    </li>
    
    
    <li class="next">
      <a href="/2024/03/13/Flutter%E7%BB%84%E4%BB%B6%E8%AE%B0%E5%BD%95/" title="Flutter组件记录"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
  </ul>
  
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="qq,wechat,qzone,weibo,facebook,twitter" data-mobile-sites="qq,wechat,qzone,weibo,facebook,twitter"></div>
    
  </div>
  </div>
</nav>
  


</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/PrinceSaoKe" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="https://PrinceSaoKe.github.io/images/qq.jpg" target="_blank" title="Qq" data-toggle=tooltip data-placement=top><i class="icon icon-qq"></i></a></li>
        
        <li><a href="https://PrinceSaoKe.github.io/images/weixin.png" target="_blank" title="Wechat" data-toggle=tooltip data-placement=top><i class="icon icon-wechat"></i></a></li>
        
        <li><a href="mailto:2596818595@qq.com" target="_blank" title="Email" data-toggle=tooltip data-placement=top><i class="icon icon-email"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        <div class="publishby">
        	Theme by <a href="https://github.com/cofess" target="_blank"> cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.
        </div>
    </div>
</footer>
  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>






   
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





   
    
  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/valine"></script>
  <script type="text/javascript">
  var GUEST = ['nick', 'mail', 'link'];
  var meta = 'nick,mail,link';
  meta = meta.split(',').filter(function(item) {
    return GUEST.indexOf(item) > -1;
  });
  new Valine({
    el: '#vcomments',
    verify: false,
    notify: false,
    appId: '',
    appKey: '',
    placeholder: 'Just go go',
    avatar: 'mm',
    meta: meta,
    pageSize: '10' || 10,
    visitor: false
  });
  </script>

     







</body>
</html>